<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>数组转换成树形结构</title>
  <style></style>
</head>
<body>
<script>
  let arr = [
    {id: 0, name: 1, parentId: null},
    {id: 1, name: 2, parentId: null},
    {id: 2, name: 3, parentId: null},
    {id: 3, name: 4, parentId: null},
    {id: 4, name: 5, parentId: 0},
    {id: 5, name: 6, parentId: 0},
    {id: 6, name: 7, parentId: 1},
    {id: 7, name: 8, parentId: 1},
    {id: 8, name: 9, parentId: 2},
    {id: 9, name: 10, parentId: 3},
    {id: 10, name: 11, parentId: 0},
    {id: 11, name: 12, parentId: 4},
    {id: 12, name: 13, parentId: 5},
    {id: 13, name: 14, parentId: 6},
    {id: 14, name: 15, parentId: 7},
    {id: 15, name: 16, parentId: 8},
    {id: 16, name: 17, parentId: 1},
    {id: 17, name: 18, parentId: 0},
    {id: 18, name: 19, parentId: 3},
    {id: 19, name: 20, parentId: 2},
    {id: 20, name: 21, parentId: 1},
  ];

  function toTree(arr) {
    let result = [];
    let map = {};
    arr.forEach(item => {
      map[item.id] = item;
      map[item.id].children = [];
      if (item.parentId || item.parentId === 0) {
        map[item.parentId].children.push(item)
      } else {
        result.push(item)
      }
    });
    return result
    /*return Object.values(map).filter(item => {
      if (item.parentId === null) {
        return item;
      }
    });*/
  }

  console.log(toTree(arr));
</script>
</body>
</html>
