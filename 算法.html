<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>算法</title>
  <style></style>
</head>
<body>
<script>
  /**
   * 取数组交集
   */
  let arr1 = [1, 2, 3, 4, 3, 2, 3, 9];
  let arr2 = [5, 2, 5, 4, 7, 2, 6, 9];

  function getIntersection() {
    let map1 = toMap(arr1);
    let map2 = toMap(arr2);
    let result = [];
    Object.keys(map1).forEach(key => {
      let val1 = map1[key];
      let val2 = map2[key];
      if (val1 && val2) {
        result.push(key*1)
      }
    });
    return result;
  }

  function toMap(arr) {
    return arr.reduce((pre, val) => {
      if (pre[val]) {
        pre[val] = pre[val] + 1;
      } else {
        pre[val] = 1
      }
      return pre
    }, {})
  }

  /**
   * 给定一个包括  n 个整数的数组  nums  和 一个目标值  target。
   * 找出  nums  中的三个整数，使得它们的和与  target  最接近。返回这三个数的和。
   * 假定每组输入只存在唯一答案。
   */


  /**
   * 第一个错误版本，使用二分法
   */
  let result = function (isBadVersion) {
    return function (n) {
      let left = 1, right = n;
      while (left < right) {
        const mid = Math.floor(left + (right - left)/2);
        if (isBadVersion(mid)) {
          right = mid; // 答案在区间[left, mid]中
        } else {
          left = mid + 1; // 答案在区间[mid + 1, right]中
        }
      }
      // 循环到 left === right, 区间缩小到一个点，这个点的下标即为答案
      return left
    }
  };

  /**
   * 无重复字符串的最长子串
   */
  function lengthOfLongestSubstring(str) {
    const occ = new Set();
    const n = str.length;
    // 右指针，初始值为-1，相当于我们在字符串的左边界的左侧，还没有开始移动
    let rk = -1, ans = 0;
    for (let i = 0; i < n; ++i) {
      if (i !== 0) {
        // 左指针向右移动一格，移除一个字符
        occ.delete(str.charAt(i - 1))
      }
      while (rk + 1 < n && !occ.has(str.charAt(rk + 1))) {
        // 不断的移动右指针
        occ.add(str.charAt(rk + 1));
        ++rk
      }
      // 第i到rk个字符是一个极长的无重复字符子串
      ans = Math.max(ans, rk - i + 1)
    }
    return ans;
  }

  console.log(lengthOfLongestSubstring('adfasdflasdfjasldfjasdlf'));


</script>

</body>
</html>
